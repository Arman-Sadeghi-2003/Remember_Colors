<UserControl
    x:Class="RememberColors.Views.SettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:RememberColors.ViewModels"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Disabled"
                  Padding="32">
        <StackPanel MaxWidth="600">
            <!-- Header -->
            <TextBlock Text="Settings" 
                       Style="{StaticResource HeaderTextStyle}"/>

            <!-- General Settings Card -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="General Settings" 
                               Style="{StaticResource SectionHeaderStyle}"/>

                    <!-- Number of Colors -->
                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0"
                                   Text="Number of Colors"
                                   Style="{StaticResource LabelTextStyle}"/>
                        <TextBox Grid.Column="1"
                                 Style="{StaticResource ModernTextBoxStyle}"
                                 Text="{Binding Model.ShowColorsNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </Grid>

                    <!-- Show Speed -->
                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0"
                                   Text="Animation Speed"
                                   Style="{StaticResource LabelTextStyle}"/>
                        <ComboBox Grid.Column="1"
                                  Style="{StaticResource ModernComboBoxStyle}"
                                  SelectedValue="{Binding ShowSpeed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <ComboBoxItem Content="1x" Tag="1"/>
                            <ComboBoxItem Content="2x" Tag="2"/>
                            <ComboBoxItem Content="3x" Tag="3"/>
                            <ComboBoxItem Content="4x" Tag="4"/>
                        </ComboBox>
                    </Grid>

                    <!-- Random Colors -->
                    <CheckBox Content="Enable Random Colors"
                              Style="{StaticResource ModernCheckBoxStyle}"
                              IsChecked="{Binding Model.IsRandom, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>
            </Border>

            <!-- Color Selection Card -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Color Palette" 
                               Style="{StaticResource SectionHeaderStyle}"/>

                    <TextBlock Text="Choose your preferred colors for the display"
                               Style="{StaticResource LabelTextStyle}"
                               Margin="0,0,0,16"/>

                    <ItemsControl ItemsSource="{Binding Model.SelectableColors.Values}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Button Style="{StaticResource ColorButtonStyle}"
                                        Background="{Binding DataContext.Model.SelectedColors, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource ColorSelectionToBrushConverter}, ConverterParameter={Binding}}"
                                        Command="{Binding DataContext.SelectColorCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        CommandParameter="{Binding}"
                                        IsEnabled="{Binding DataContext.Model.IsRandom, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource InverseBooleanConverter}}"
                                        ToolTip="{Binding}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- Action Buttons -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Actions" 
                               Style="{StaticResource SectionHeaderStyle}"/>

                    <WrapPanel Orientation="Horizontal">
                        <Button Content="🏠 Home"
                                Style="{StaticResource PrimaryButtonStyle}"
                                Command="{Binding HomeCommand}"
                                Margin="0,0,12,0"/>
                        <Button Content="💾 Save Settings"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Command="{Binding SaveCommand}"
                                Margin="0,0,12,0"/>
                        <Button Content="📂 Load Settings"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Command="{Binding LoadCommand}"/>
                    </WrapPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>

</UserControl>
